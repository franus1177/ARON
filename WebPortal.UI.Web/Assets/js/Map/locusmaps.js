!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).LocusMaps=n()}}(function(){return function n(t,e,r){function o(i,s){if(!e[i]){if(!t[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var f=e[i]={exports:{}};t[i][0].call(f.exports,function(n){var e=t[i][1][n];return o(e||n)},f,f.exports,n,t,e,r)}return e[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(n,t,e){function r(n){m?setTimeout(n,0):l.push(n)}function o(){m=!0,l.forEach(function(n){n()}),l=null}function a(){if(f)return i(u+"main.js"),void i.css(u+"main.css");i(u+"locuslabs.js"),i.css(u+"locuslabs.css")}var i=n("./dynaload"),s=n("./control"),c=n("./comproc"),u="https://js.locuslabs.com/latest/",f=!1;"?local"===document.location.search&&(f=!0,u="http://localhost:8010/"),window.LL_ROOT_URL&&(f=!0,u=window.LL_ROOT_URL);var d=[{command:"getBuildings"},{command:"getEncodedState"},{command:"getNavigation",args:[{arg:"fromPoiId",type:"int"},{arg:"toPoiId",type:"int"}]},{command:"getPosition"},{command:"getPOIDetails",args:[{arg:"id",type:"int"}]},{command:"getZoom"},{command:"hideMarkers"},{command:"initHeadless",args:[{arg:"configURL",type:"string"}]},{command:"initHeadless",args:[{arg:"accountId",type:"string"},{arg:"venueId",type:"string"}]},{command:"search",args:[{arg:"term",type:"string"},{arg:"details",type:"boolean",optional:!0}]},{command:"resetMap"},{command:"resetSearch"},{command:"setPosition",args:[{arg:"lat",type:"float",min:0,max:90},{arg:"lng",type:"float",min:-180,max:180}]},{command:"setPosition",args:[{arg:"buildingId",type:"string"}]},{command:"setHeading",args:[{arg:"degrees",type:"float"}]},{command:"showLevel",args:[{arg:"id",type:"string"}]},{command:"showLevel",args:[{arg:"ord",type:"int",min:0}]},{command:"showMarkers",args:[{arg:"poiList",type:"array"}]},{command:"showMarkers",args:[{arg:"poiIdList",type:"array"}]},{command:"showNavigation",args:[{arg:"fromPoiId",type:"int"},{arg:"toPoiId",type:"int"},{arg:"segIndex",type:"int",optional:!0}]},{command:"showPOI",args:[{arg:"id",type:"int",min:0}]},{command:"showSearch",args:[{arg:"term",type:"string"}]},{command:"version",const:[{arg:"sdkVersion",value:"2.4.0"}]},{command:"zoom",args:[{arg:"by",type:"float",min:-100,max:100}]},{command:"zoom",args:[{arg:"to",type:"float",min:0,max:100}]}],m=!1,l=[];!function(){a();var n=s(d);n.dynaload=i,n.onReady=r,n.help=function(){console.log("Valid Commands:\n"+c.showHelp(d))},n.on("ready",o),t.exports=n}()},{"./comproc":2,"./control":3,"./dynaload":4}],2:[function(n,t,e){function r(n){return d+n.arg+d}function o(n,t){for(;t.length<n;)t+=" ";return t}function a(n,t){var e=n.filter(function(n){return n.command===t.command});if(e.length<=0)return u;var r=c(function(n){if(i(n,t))return n},e);return r||f}function i(n,t){return!n.args||n.args.reduce(function(n,e){return!(void 0===t[e.arg]&&!e.optional)&&n},!0)}function s(n,t){if("int"===n.type&&("string"==typeof t&&(t=parseInt(t,10)),!Number.isInteger(t)))return"expected integer argument for argument "+r(n)+" but received "+t;if("float"===n.type&&("string"==typeof t&&(t=parseFloat(t)),!Number.isFinite(t)))return"expected float argument for argument "+r(n)+" but received '"+t+"'";if("int"===n.type||"float"===n.type){if(void 0!==n.min&&t<n.min)return"argument "+r(n)+" must be at least "+n.min+" but is "+t;if(void 0!==n.max&&t>n.max)return"argument "+r(n)+" must be at most "+n.max+" but is "+t}return"string"===n.type&&"string"!=typeof t?"argument "+r(n)+" must be a string but is type "+typeof t:"boolean"!==n.type||!0===t||!1===t||"false"===t||"true"===t||"yes"===t||"no"===t||"argument "+r(n)+" must be a boolean but is type "+typeof t+" with value of "+t}var c=n("./each"),u={},f={},d="'";t.exports={BADSIG:f,BADCOM:u,validate:function(n,t){var e=a(n,t);if(e.invalid)return e;if(!e.args||!e.args.length)return e;var r=c(function(n){if(void 0!==t[n.arg]){var e=s(n,t[n.arg]);if("string"==typeof e)return e}},e.args);return"string"==typeof r?r:e},showHelp:function(n){return n.reduce(function(n,t){return n+o(18,t.command)+(t.args?t.args.map(function(n){return n.arg+(n.optional?" (optional)":"")}).join(", "):"")+"\n"},o(18,"Command")+"Arguments\n"+o(18,"----------------")+"----------------\n")}}},{"./each":5}],3:[function(n,t,e){(function(e){function r(n,t,r){var o=i.validate(n,t);if(o===i.BADSIG)throw Error("Control object passed contains valid command but no argument signature matches: "+JSON.stringify(t)+"\n\nValid "+t.command+" Signatures:\n"+i.showHelp(n.filter(function(n){return n.command===t.command})));if(o===i.BADCOM)throw Error("Control object passed does not match any valid command: "+JSON.stringify(t)+"\n\nValid Commands:\n"+i.showHelp(n));if("string"==typeof o)throw Error(o);o.const&&o.const.forEach(function(n){(t=Object.assign({},t))[n.arg]=n.value}),t.LLmsgType="Locus-client",t.LLmsgId=c++,u[t.LLmsgId]={cb:r,cob:t},e.postMessage(t,"*")}function o(n){window.addEventListener("message",function(t){a(t,n)},!1)}function a(n,t){if(n.data&&"Locus-server"===n.data.LLmsgType){var e=u[n.data.LLmsgId];if(window.lastpcob=e,e){var r=n.data.response;r&&"ERROR"===r.type&&(r=Error(r.msg)),t.fire("response",r),e.cb&&e.cb(r),delete u[n.data.LLmsgId]}else n.data.event?t.fire(n.data.event,n.data):console.warn("Received badly formed message from Locus-server: ",n.data)}}var i=n("./comproc"),s=n("./observable"),c=1,u={};t.exports=function(n){var t=[],e=!1,a=function(o,a){if(e)return r(n,o,a);t.push({cob:o,cb:a})},i=window.Zousan||window.Promise;if(i){var c=a;a=function(n,t){return new i(function(e,r){c(n,function(n){n instanceof Error?r(n):e(n),t&&t(n)})})}}return s(a),o(a),a.on("ready",function(){e=!0,t.forEach(function(t){r(n,t.cob,t.cb)}),t=null}),a}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./comproc":2,"./observable":6}],4:[function(n,t,e){t.exports=function(n,t){var e=document.getElementsByTagName("head")[0],r=document.createElement("script");r.setAttribute("src",n),e.appendChild(r),r.addEventListener("load",t)},t.exports.css=function(n,t){var e=document.getElementsByTagName("head")[0],r=document.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",n),e.appendChild(r),r.addEventListener("load",t)}},{}],5:[function(n,t,e){t.exports=function(n,t){for(var e in t)if(t.hasOwnProperty&&t.hasOwnProperty(e)){var r=n.call(t,t[e],e);if(void 0!==r)return r}}},{}],6:[function(n,t,e){function r(n){return a(this._observers,n),this}function o(n,t){return n.splice(t,1)[0]}function a(n,t){var e=0;do{(e=n.indexOf(t,e))>=0&&o(n,e)}while(e>=0);return n}function i(n){var t=u();return this.observe(function(){n.apply(null,arguments)&&t.fire.apply(t,arguments)}),t}function s(n){return i.call(this,function(t){return n===t})}function c(n,t){for(var e in t)n[e]=t[e];return n}function u(n){return n?c(n,f):Object.create(f)}var f={detach:r,fire:function(){var n=this._observers;if(n){for(var t=0;t<n.length;t++)try{n[t].apply(null,arguments)}catch(n){}return this}},map:function(n){var t=u(),e=arguments;return this.observe(function(){return"function"==typeof n?t.fire(n.apply(null,arguments)):t.fire.apply(t,e)}),t},observe:function(n){return this._observers||(this._observers=[]),this._observers.push(n),{detach:r.bind(this,n),ob:this}},on:function(n,t){return s.call(this,n).observe(t)},onValue:function(n){return this.filter(function(t){return t===n})}};t.exports=u},{}]},{},[1])(1)});
