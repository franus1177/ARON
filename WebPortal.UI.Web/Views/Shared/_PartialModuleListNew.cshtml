@using WebPortal.UI.Web.GlobalResource;
@using System.Collections;
@using WebPortal.Business.Entities.Utility;
@{
    var User_LoginInfo = this.Session["User_LoginInfo"];
    Hashtable _User = (Hashtable)User_LoginInfo;
    var CurrentLanguageCode = Convert.ToString(_User["LanguageCode"].ToString());
    var UserModules = Convert.ToString(_User["UserModules"].ToString());
    var CurrentModuleCode = Convert.ToString(_User["CurrentModuleCode"].ToString());
    var ModuleCount = UserModules.Split(',').Length - 1;
}
<style type="text/css">
    .SelectedModule {
        line-height: 25px !important;
        border: 3px solid #191818 !important;
        border-radius: 3px !important;
    }

    .SelectedSmallModule {
        line-height: 0px !important;
        border: 1px solid #191818 !important;
        border-radius: 0px !important;
    }

    .sidebar .sidebar-shortcuts-large > .btn {
        width: 40px !important;
    }

    .popover {
        max-width: 300px;
    }

        .popover.bottom > .arrow {
            left: 50%;
        }

    .sidebar .sidebar-shortcuts-large {
        line-height: 37px;
        display: none;
    }

    .menualign {
        height: 28px;
        border: 0px !important;
        width: 40px;
        margin-bottom: 10px;
    }

    .sidebar.menu-min .sidebar-shortcuts:hover .sidebar-shortcuts-large {
        display: none;
    }
</style>

<div class="sidebar-shortcuts" id="sidebar-shortcuts">
    <button type="button" class="btn btn-secondary pull-left" data-container="body" data-toggle="popover" data-placement="bottom" data-html="true">
        <img src="http://icons.iconarchive.com/icons/alecive/flatwoken/256/Apps-Google-Chrome-App-List-icon.png" alt="Italian Trulli" style="height: 30px;">
    </button>
    <div class="sidebar-shortcuts-large pull-left" id="sidebar-shortcuts-large" style="/*width:100%;*/margin-left: 5px;">
        @{
            foreach (var item in UserModules.Split(','))
            {
                switch (item)
                {
                    case ModuleCode.Base:
                        {
                            <button id="btn_@item" data-id="@item" class="btn menualign" type="button" style="height: 35px; border: 0px !important;" title="@Resource.ModuleBS" onclick="ChangeModule(this)">
                                <i class="ace-icon fa fa-bandcamp"></i>
                            </button>
                            <span style="padding-right: 40px;padding-left: 10px;">Base</span>
                            break;
                        }
                    case ModuleCode.Safety:
                        {
                            <button id="btn_@item" data-id="@item" class="btn btn-danger menualign" type="button" style="height: 35px; border: 0px !important;" title="@Resource.ModuleSF" onclick="ChangeModule(this)">
                                <i class="ace-icon fa fa-fire"></i>
                            </button> <span style="padding-right: 20px;padding-left: 10px;"> @Resource.Safety </span>
                            break;
                        }
                    case ModuleCode.Drill:
                        {
                            <button id="btn_@item" data-id="@item" class="btn btn-warning menualign" type="button" style="padding-right: 20px;padding-left: 10px;" title="@Resource.ModuleDR" onclick="ChangeModule(this)">
                                <i class="ace-icon fa fa-dribbble"></i>
                            </button> <span style="padding-right: 20px;padding-left: 10px;">@Resource.Drill</span>
                            break;
                        }
                    case ModuleCode.Training:
                        {
                            <button id="btn_@item" data-id="@item" class="btn btn-info menualign" type="button" style="height: 35px; border: 0px !important;" title="@Resource.ModuleTR" onclick="ChangeModule(this)">
                                <i class="ace-icon fa fa-institution"></i>
                            </button> <span style="padding-right: 35px;padding-left: 10px;">@Resource.Training</span>
                            break;
                        }
                    case ModuleCode.Incident:
                        {
                            <button id="btn_@item" data-id="@item" class="btn btn-inverse menualign" type="button" style="height: 35px; border: 0px !important;" title="@Resource.ModuleIN" onclick="ChangeModule(this)">
                                <i class="ace-icon fa fa-bolt"></i>
                            </button> <span style="padding-right: 22px;padding-left: 10px;">@Resource.Incident</span>
                            break;
                        }
                    case ModuleCode.FRAS:
                        {
                            <button id="btn_@item" data-id="@item" class="btn btn-primary menualign" type="button" style="height: 35px; border: 0px !important;" title="@Resource.ModuleFR" onclick="ChangeModule(this)">
                                <i class="ace-icon fa fa-exclamation-triangle"></i>
                            </button> <span style="padding-right: 20px;padding-left: 10px;">FRAS</span>
                            break;
                        }
                    case ModuleCode.Hira:
                        {
                            <button id="btn_@item" data-id="@item" class="btn btn-success menualign" type="button" style="height: 35px; border: 0px !important;" title="@Resource.ModuleRA" onclick="OpenHIRA()">
                                <i class="ace-icon fa fa-tachometer"></i>
                            </button> <span style="padding-right: 39px;padding-left: 10px;">Hira </span>
                            break;
                        }
                    case ModuleCode.Work:
                        {
                            <button id="btn_@item" data-id="@item" class="btn label-purple menualign" type="button" style="height: 35px; border: 0px !important; background-color:#808000 !important;" title="@Resource.ModuleWR" onclick="ChangeModule(this)">
                                <i class="ace-icon fa fa-laptop"></i>
                            </button> <span style="padding-right: 20px;padding-left: 10px;">Work</span>
                            break;
                        }

                        @*case ModuleCode.Fleet:
                            {
                                <button id="btn_@item" data-id="@item" class="btn menualign" type="button" style="height: 35px; border: 0px !important;background-color:#018F98 !important;" title="@Resource.ModuleFM" onclick="OpenFleet()">
                                    <i class="ace-icon fa fa-truck"></i>
                                </button> <span style="padding-right: 20px;padding-left: 10px;">Fleet</span>
                                break;
                            }
                        case ModuleCode.Compliance:
                            {
                                <button id="btn_@item" data-id="@item" class="btn btn-pink menualign" type="button" style="height: 35px; border: 0px !important;" title="@Resource.ModuleCM" onclick="OpenCompliance(this)">
                                    <i class="ace-icon fa fa-check-circle-o"></i>
                                </button><span style="padding-right: 20px;padding-left: 10px;">Compliance</span>
                                break;
                            }
                        case ModuleCode.Audit:
                            {
                                <button id="btn_@item" data-id="@item" class="btn btn-purple menualign" type="button" style="height: 35px; border: 0px !important;" title="@Resource.ModuleAU" onclick="OpenHIRA()">
                                    <i class="ace-icon fa fa-clipboard"></i>
                                </button><span style="padding-right: 20px;padding-left: 10px;">Audit</span>
                                break;
                            }
                        case ModuleCode.Asset:
                            {
                                <button id="btn_@item" data-id="@item" class="btn btn-primary menualign" type="button" style="height: 35px; border: 0px !important; background-color:#955E60 !important;" title="@Resource.ModuleAM" onclick="ChangeModule(this)">
                                    <i class="ace-icon fa fa-cubes"></i>
                                </button><span style="padding-right: 20px;padding-left: 10px;">Asset</span>
                                break;
                            }*@
                }
            }
        }
    </div>
</div>
<script type="text/javascript">
    var _CurrentModuleCode = "@CurrentModuleCode";
    var _ModuleCount = "@ModuleCount";

    if (eval(_ModuleCount) == 1) $('#sidebar-shortcuts').remove();//hide();

    function OpenHIRA() {
        window.open("http://rgiahira.e-grc.com");
    }

    function OpenCompliance() {
        window.open("http://rgiahira.e-grc.com?module=CM");
    }

    function OpenDrill() {
        window.open("https://drill.e-grc.com");
    }

    function OpenFleet() {
        //var srid = $("#hf_GlobalVehicleDashboardScreenID").val();
        window.location.href = "/Safety/VehicleDashboard/Index/4w$hmyEnvTg=";
    }

    function ChangeModule(id) {

        var _ModuleCode = $(id).attr("data-id");
        var url = window.location.origin;
        var __ScreenID = null;
        switch (_ModuleCode) {
            case "@ModuleCode.Base": { __ScreenID = globalScreenID.DashboardScreenID; break; }
            case "@ModuleCode.Safety": { __ScreenID = globalScreenID.SafetyDashboardScreenID; break; }
            case "@ModuleCode.Drill": { __ScreenID = globalScreenID.DrillDashboardScreenID; break; }
            case "@ModuleCode.Incident": { __ScreenID = globalScreenID.IncidentDashboardScreenID; break; }
            case "@ModuleCode.Training": { __ScreenID = globalScreenID.TrainingDashboardScreenID; break; }
            case "@ModuleCode.FRAS": { __ScreenID = globalScreenID.FRASDashboardScreenID; break; }
            case "@ModuleCode.Work": { __ScreenID = globalScreenID.WorkDashboardScreenID; break; }
            case "@ModuleCode.Fleet": { __ScreenID = globalScreenID.FleetDashboardScreenID; break; }
            case "@ModuleCode.Compliance": { __ScreenID = globalScreenID.ComplianceDashboardScreenID; break; }
            case "@ModuleCode.Audit": { __ScreenID = globalScreenID.AuditDashboardScreenID; break; }
            case "@ModuleCode.Asset": { __ScreenID = globalScreenID.AssetDashboardScreenID; break; }

        }

        if (__ScreenID != null)
            window.open(url + "/AjaxCommonData/RedirectTo/?DefaultModuleCode=" + _ModuleCode + "&ScreenID=" + __ScreenID, "_self");
        else if (__ScreenID == undefined || __ScreenID == null || __ScreenID == "") {
            toastr.error(Resource.DashboardAccessRequired);
        }
    }

    function SetActiveModule(CurrentModule) {
        $("#btn_" + CurrentModule).addClass("SelectedModule");
        $("#btnSmall_" + CurrentModule).addClass("SelectedSmallModule");
    }

</script>